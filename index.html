
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>dqpy &#8212; dqpy 2.0.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="dqpy">
<h1>dqpy<a class="headerlink" href="#dqpy" title="Permalink to this headline">¶</a></h1>
<p>Danqing’s shared Python library, written with love for <a class="reference external" href="https://danqing.co/">the better Danqing</a>.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="cache">
<h2>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h2>
<p>The cache module provides a simple JSON and Redis based caching decorator.</p>
</div>
<div class="section" id="config">
<h2>Config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h2>
<p>The config module helps getting configurations from TOML files stored in the <code class="docutils literal notranslate"><span class="pre">config/</span></code> folder. The default file to use is <code class="docutils literal notranslate"><span class="pre">config/local.toml</span></code>. To use another file, specify the <code class="docutils literal notranslate"><span class="pre">DQENV</span></code> environment variable. For example, if <code class="docutils literal notranslate"><span class="pre">DQENV=production</span></code>, then the <code class="docutils literal notranslate"><span class="pre">config/production.toml</span></code> file will be used. Nested keys are comma-separated.</p>
</div>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>SQL database client. This module provides connectors to the SQL database, with its configs specified (by you) in the config files. Check out the <code class="docutils literal notranslate"><span class="pre">config/local.toml</span></code> file for an example configuration.</p>
</div>
<div class="section" id="dbadmin">
<h2>DBAdmin<a class="headerlink" href="#dbadmin" title="Permalink to this headline">¶</a></h2>
<p>This module is designed to be used as a shell script, for creating and dropping the database.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dbadmin create  <span class="c1"># Create a database with URL at sql.url</span>
dbadmin drop    <span class="c1"># Drop the above database</span>
dbadmin create another_sql.url  <span class="c1"># Create a database with URL at anothersql.url</span>
</pre></div>
</div>
</div>
<div class="section" id="email">
<h2>Email<a class="headerlink" href="#email" title="Permalink to this headline">¶</a></h2>
<p>Module for sending emails.</p>
</div>
<div class="section" id="entity">
<h2>Entity<a class="headerlink" href="#entity" title="Permalink to this headline">¶</a></h2>
<p>The entity module provide basic functionalities for Schematics entity classes.</p>
</div>
<div class="section" id="errors">
<h2>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h2>
<p>The errors module contains a bunch of error classes so we don’t need to redefine them over and over. They also translate to HTTP errors nicely.</p>
<span class="target" id="module-dq.errors"></span><dl class="exception">
<dt id="dq.errors.DQError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">DQError</code><span class="sig-paren">(</span><em>message=''</em>, <em>status_code=None</em>, <em>error_code=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#DQError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.DQError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base exception.</p>
<p>Clients that wish to catch all exceptions should catch this one.
The <code class="docutils literal notranslate"><span class="pre">status_code</span></code> will be set as the HTTP status code if a view handler
triggers an error. If there is need to set the exact type of error, use
<code class="docutils literal notranslate"><span class="pre">error_code</span></code>.</p>
<p>4xx errors are due to the user, and as such the message will be passed
directly back to user. 5xx errors will have the message replaced by the
generic ‘Internal Error’ before sending back to user.</p>
<dl class="method">
<dt id="dq.errors.DQError.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#DQError.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.DQError.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="dq.errors.ForbiddenError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">ForbiddenError</code><span class="sig-paren">(</span><em>message='Forbidden'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#ForbiddenError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.ForbiddenError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when the user does not have the required permission.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.IntegrationError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">IntegrationError</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#IntegrationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.IntegrationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when there is a service integration error.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.InternalError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">InternalError</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#InternalError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.InternalError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when there is an internal server error.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.InvalidInputError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">InvalidInputError</code><span class="sig-paren">(</span><em>message='Invalid input'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#InvalidInputError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.InvalidInputError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when the user input is not valid.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.ModelError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">ModelError</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#ModelError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.ModelError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when something is wrong with the models.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.NotFoundError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">NotFoundError</code><span class="sig-paren">(</span><em>message='Not found'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#NotFoundError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.NotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when something is not found.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.RecoverableError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">RecoverableError</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#RecoverableError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.RecoverableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when a recoverable error occurs.</p>
<p>This may be due to network error, timeout, etc. and is meant to be retried.
If retrying gives no luck, this is considered a 500 error.</p>
</dd></dl>

<dl class="exception">
<dt id="dq.errors.UnauthorizedError">
<em class="property">exception </em><code class="descclassname">dq.errors.</code><code class="descname">UnauthorizedError</code><span class="sig-paren">(</span><em>message='Unauthorized'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/errors.html#UnauthorizedError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.errors.UnauthorizedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dq.errors.DQError" title="dq.errors.DQError"><code class="xref py py-class docutils literal notranslate"><span class="pre">dq.errors.DQError</span></code></a></p>
<p>Exception raised when the user is not authenticated for an action.</p>
</dd></dl>

</div>
<div class="section" id="fsutil">
<h2>FSUtil<a class="headerlink" href="#fsutil" title="Permalink to this headline">¶</a></h2>
<p>The fsutil module contains file and file system helpers.</p>
<span class="target" id="module-dq.fsutil"></span><dl class="function">
<dt id="dq.fsutil.fileinfo">
<code class="descclassname">dq.fsutil.</code><code class="descname">fileinfo</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/fsutil.html#fileinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.fsutil.fileinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Information of a file.</p>
<p>This function throws an error if the path is not a valid file. To suppress
errors, use <code class="docutils literal notranslate"><span class="pre">safe_fileinfo</span></code> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) – The path to the file.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns string mime:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">The MIME type of the file, such as text/plain.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Returns int size:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">The size (in bytes) of the file.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns string encoding:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">The encoding of the file, like gzip. This is
suitable for use as the Content-Encoding header.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.fsutil.mkdirp">
<code class="descclassname">dq.fsutil.</code><code class="descname">mkdirp</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/fsutil.html#mkdirp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.fsutil.mkdirp" title="Permalink to this definition">¶</a></dt>
<dd><p>Safely mkdir, creating all parent folders if they don’t yet exist.</p>
<p>This doesn’t raise an error if the folder already exists. However, it does
raise <code class="docutils literal notranslate"><span class="pre">FileExistsError</span></code> if the path points to an existing file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) – The path to the folder to be created.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.fsutil.rmrf">
<code class="descclassname">dq.fsutil.</code><code class="descname">rmrf</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/fsutil.html#rmrf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.fsutil.rmrf" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a path like rm -rf.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) – The path to remove.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.fsutil.safe_fileinfo">
<code class="descclassname">dq.fsutil.</code><code class="descname">safe_fileinfo</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/fsutil.html#safe_fileinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.fsutil.safe_fileinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrive information of a file without throwing an error.</p>
<p>If the path is invalid, None, 0, None will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) – The path to the file.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns string mime:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">The MIME type of the file, such as text/plain.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Returns int size:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">The size (in bytes) of the file.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns string encoding:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">The encoding of the file, like gzip. This is
suitable for use as the Content-Encoding header.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.fsutil.traverse">
<code class="descclassname">dq.fsutil.</code><code class="descname">traverse</code><span class="sig-paren">(</span><em>path</em>, <em>callback</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/fsutil.html#traverse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.fsutil.traverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Traverse a directory recursively, performing a task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) – The path of the directory.</li>
<li><strong>callback</strong> (<em>func</em>) – A callback applied to each child file and directory.
It takes 2 arguments, the relative path from the root, and whether the
item is a directory.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="funcutil">
<h2>FuncUtil<a class="headerlink" href="#funcutil" title="Permalink to this headline">¶</a></h2>
<p>The funcutil module contains function helpers.</p>
<span class="target" id="module-dq.funcutil"></span><dl class="function">
<dt id="dq.funcutil.safe_invoke">
<code class="descclassname">dq.funcutil.</code><code class="descname">safe_invoke</code><span class="sig-paren">(</span><em>noreturn=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/funcutil.html#safe_invoke"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.funcutil.safe_invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke a function safely.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>noreturn</strong> (<em>boolean</em>) – Whether the function being called has no return
value itself. Default to False. If True and the function returns
successfully, True will be returned. None will be returned upon failure
no matter whether the function has return value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns func:</th><td class="field-body">The decorator function that provides safe invocation.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>The logging module helps format logging messages. It prints the message and pretty-prints the attached data dictionary. Use it as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">dq.logging</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">error</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s1">&#39;An error!&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
</pre></div>
</div>
<span class="target" id="module-dq.logging"></span><dl class="function">
<dt id="dq.logging.debug">
<code class="descclassname">dq.logging.</code><code class="descname">debug</code><span class="sig-paren">(</span><em>logger</em>, <em>message</em>, <em>payload=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/logging.html#debug"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.logging.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a debug message. This does nothing in production enviornment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<em>logger</em>) – The logger to use.</li>
<li><strong>message</strong> (<em>string</em>) – The debug message.</li>
<li><strong>payload</strong> (<em>dict</em>) – The payload to attach to the log.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.logging.error">
<code class="descclassname">dq.logging.</code><code class="descname">error</code><span class="sig-paren">(</span><em>logger</em>, <em>message</em>, <em>payload=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/logging.html#error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.logging.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an error message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<em>logger</em>) – The logger to use.</li>
<li><strong>message</strong> (<em>string</em>) – The error message.</li>
<li><strong>payload</strong> (<em>dict</em>) – The payload to attach to the log.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.logging.info">
<code class="descclassname">dq.logging.</code><code class="descname">info</code><span class="sig-paren">(</span><em>logger</em>, <em>message</em>, <em>payload=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/logging.html#info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.logging.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an info message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<em>logger</em>) – The logger to use.</li>
<li><strong>message</strong> (<em>string</em>) – The info message.</li>
<li><strong>payload</strong> (<em>dict</em>) – The payload to attach to the log.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.logging.warning">
<code class="descclassname">dq.logging.</code><code class="descname">warning</code><span class="sig-paren">(</span><em>logger</em>, <em>message</em>, <em>payload=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/logging.html#warning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.logging.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a warning message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<em>logger</em>) – The logger to use.</li>
<li><strong>message</strong> (<em>string</em>) – The warning message.</li>
<li><strong>payload</strong> (<em>dict</em>) – The payload to attach to the log.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="orm">
<h2>ORM<a class="headerlink" href="#orm" title="Permalink to this headline">¶</a></h2>
<p>The SQL ORM base classes. Your model classes should most likely inherit from <code class="docutils literal notranslate"><span class="pre">IDBase</span></code> or <code class="docutils literal notranslate"><span class="pre">UUIDBase</span></code>, and some other mixins.</p>
</div>
<div class="section" id="redis">
<h2>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h2>
<p>The Redis client. It reads the config files for Redis configs, which you must specify to use this client. Refer to the <code class="docutils literal notranslate"><span class="pre">config/local.toml</span></code> file in this repo for an example.</p>
</div>
<div class="section" id="retry">
<h2>Retry<a class="headerlink" href="#retry" title="Permalink to this headline">¶</a></h2>
<p>Retry helpers. A function can raise <code class="docutils literal notranslate"><span class="pre">RecoverableError</span></code> as needed so that it can be retried. The SQL variant can also be used to retry SQL errors.</p>
</div>
<div class="section" id="string">
<h2>String<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h2>
<p>String utilities that you may find useful.</p>
<span class="target" id="module-dq.string"></span><dl class="function">
<dt id="dq.string.lower_no_punc">
<code class="descclassname">dq.string.</code><code class="descname">lower_no_punc</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/string.html#lower_no_punc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.string.lower_no_punc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert string to lowercase, stripping spaces and punctuations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> (<em>string</em>) – The text to clean up.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns string:</th><td class="field-body">The cleaned up text.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.string.random_string">
<code class="descclassname">dq.string.</code><code class="descname">random_string</code><span class="sig-paren">(</span><em>length</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/string.html#random_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.string.random_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a random string of lowercase letters + numbers of the given length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>length</strong> (<em>int</em>) – The desired length of the string.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns string:</th><td class="field-body">A random string of the given length.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.string.safe_relative_path">
<code class="descclassname">dq.string.</code><code class="descname">safe_relative_path</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/string.html#safe_relative_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.string.safe_relative_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a relative path is “safe”.</p>
<p>A path is safe if it is a relative path and doesn’t contain . or ..’s.
This prevents us from directory traversal attacks.</p>
<p>Note that for simplicity, certain safe paths aren’t allowed either, notably
… (e.g. …/path). Normal user should not really use such paths.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) – The path to check.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns boolean:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">True if the path is safe, and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dq.string.valid_filename">
<code class="descclassname">dq.string.</code><code class="descname">valid_filename</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/string.html#valid_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.string.valid_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a string into a valid filename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> (<em>string</em>) – The string to convert.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns string:</th><td class="field-body">A valid filename derived from the string.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="util">
<h2>Util<a class="headerlink" href="#util" title="Permalink to this headline">¶</a></h2>
<p>General utilities that you may find useful.</p>
<span class="target" id="module-dq.util"></span><dl class="function">
<dt id="dq.util.safe_cast">
<code class="descclassname">dq.util.</code><code class="descname">safe_cast</code><span class="sig-paren">(</span><em>value</em>, <em>to_type</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dq/util.html#safe_cast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dq.util.safe_cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast a value to another type safely.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> – The original value.</li>
<li><strong>to_type</strong> (<em>type</em>) – The destination type.</li>
<li><strong>default</strong> – The default value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">dqpy</a></h1>










<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; 2018 Danqing Liu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/danqing/dqpy" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>